// - I N T E G R A T I O N   T E S T S
task preIntegrationTask(type: Exec) {
    group = 'integration'
    inputs.files(fileTree('src/main/sh/downloads'))
            .withPropertyName('csvTableContents')
            .withPathSensitivity(PathSensitivity.RELATIVE)
    outputs.file(layout.projectDirectory.dir('src/integration/resources/sde.db'))
            .withPropertyName('outputDb')
    workingDir "$projectDir/src/main/sh"
    commandLine 'bash', './update-sde.sh'
    commandLine 'bash', './install-sde.sh'
}
task integrationTest(type: Test) {
    group = 'integration'
    testClassesDirs = sourceSets.integration.output.classesDirs
    classpath = sourceSets.integration.runtimeClasspath
}
check.dependsOn integrationTest
integrationTest.mustRunAfter test
integrationTest.dependsOn preIntegrationTask

