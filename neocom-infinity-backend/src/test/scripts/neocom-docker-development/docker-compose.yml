# DEVELOPMENT - Docker Composer components
# PROJECT CODE - 52
#
# Docker composer automatically creates a network. The container host matches the container name. To differentiate and create single
#   networks use a directory name that should be unique. The recommended format is: <project>-docker-<environment>
#
# Then configure the postgres database to start on that network.
# The database will be then on location:
#   jdbc:postgresql://0.0.0.0:5432/postgres
# To access the database from DBeaver we use the URL - It is the generic global database
#
# The application to be accessed from Postman is at location and should be started from the IntelliJ framework.
#   http://0.0.0.0:5240/actuator/health
#
# The list of project ports is on the document:
#   {REPOSITORY}/README.md

version: '3'

services:
    NIB-dev-apisimulator-esi-oauth:
        container_name: NIB-dev-apisimulator-esi-oauth
        image: apimastery/apisimulator:1.8
        ports:
            - "5265:6090"
        volumes:
            # WARNING - Use full absolute paths to make this work.
            - ../../resources/esioauth-simulation:/esioauth-simulation
        command: "bin/apisimulator start /esioauth-simulation -p 6090"

    NIB-dev-apisimulator-esi-data:
        container_name: NIB-dev-apisimulator-esi-data
        image: apimastery/apisimulator:1.8
        ports:
            - "5275:6090"
        volumes:
            # WARNING - Use full absolute paths to make this work.
            - ../../resources/esidata-simulation:/esidata-simulation
        command: "bin/apisimulator start /esidata-simulation -p 6090"

    NIB-dev-neocom-postgres:
        container_name: NIB-dev-neocom-postgres
        image: "postgres:latest"
        restart: always
        ports:
            - "5255:5432"
        environment:
            - CURRENT_UID=1000
            - POSTGRES_DB=neocom
            - POSTGRES_USER=neocom-user
            - POSTGRES_PASSWORD=neocom-password
        volumes:
            - ../../scripts/neocom-docker-development/.db/development/postgres-neocom:/var/lib/postgresql/data
